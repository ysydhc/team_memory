# Workflow templates for experience creation (v3 type system)
#
# Each template maps to an experience_type and defines:
#   - structured_fields: type-specific structured_data fields with priority
#     (required / recommended / optional)
#   - progress_states: ordered list of valid progress_status values
#   - severity_options: valid severity levels (if applicable)
#   - category_options: valid category values (if applicable)
#   - core_fields: top-level required fields with priority
#   - hints: placeholder text for UI form inputs
#   - suggested_tags: default tags for this type

templates:
  # ==========================================================================
  # 1. General (default)
  # ==========================================================================
  - id: general
    experience_type: general
    name: é€šç”¨ç»éªŒ
    description: é€šç”¨çš„çŸ¥è¯†è®°å½•å’Œç»éªŒåˆ†äº«
    icon: "ğŸ“"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: required }
      - { field: solution, priority: recommended }
      - { field: root_cause, priority: optional }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: optional }
    structured_fields: []
    progress_states: []
    severity_options: []
    category_options: []
    suggested_tags: []
    hints:
      title: "ç®€è¦æè¿°è¿™æ¡ç»éªŒ"
      problem: "æè¿°é‡åˆ°çš„é—®é¢˜æˆ–éœ€è¦è®°å½•çš„èƒŒæ™¯"
      solution: "æè¿°è§£å†³æ–¹æ¡ˆæˆ–çŸ¥è¯†è¦ç‚¹"

  # ==========================================================================
  # 2. Feature (éœ€æ±‚)
  # ==========================================================================
  - id: feature
    experience_type: feature
    name: åŠŸèƒ½éœ€æ±‚
    description: è®°å½•åŠŸèƒ½éœ€æ±‚çš„å®Œæ•´å¼€å‘è¿‡ç¨‹ â€” ä»è®¾è®¡åˆ°å‘å¸ƒ
    icon: "ğŸš€"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: required, label: "éœ€æ±‚èƒŒæ™¯" }
      - { field: solution, priority: recommended, label: "å®ç°æ–¹æ¡ˆ" }
      - { field: root_cause, priority: optional, label: "æŠ€æœ¯èƒŒæ™¯" }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: optional, label: "å…³é”®ä»£ç " }
      - { field: git_refs, priority: recommended }
      - { field: related_links, priority: optional }
    structured_fields:
      - { field: requirements, type: text, priority: recommended, label: "éœ€æ±‚æè¿°", hint: "è¯¦ç»†çš„åŠŸèƒ½éœ€æ±‚è¯´æ˜" }
      - { field: acceptance_criteria, type: list, priority: recommended, label: "éªŒæ”¶æ ‡å‡†", hint: "æ¯è¡Œä¸€æ¡éªŒæ”¶æ ‡å‡†" }
      - { field: test_summary, type: text, priority: optional, label: "æµ‹è¯•æ€»ç»“", hint: "æµ‹è¯•è¦†ç›–æƒ…å†µå’Œç»“æœ" }
      - { field: release_notes, type: text, priority: optional, label: "å‘å¸ƒè¯´æ˜", hint: "é¢å‘ç”¨æˆ·çš„å˜æ›´è¯´æ˜" }
    progress_states: [planning, developing, testing, released]
    severity_options: [P0, P1, P2, P3, P4]
    category_options: [frontend, backend, database, infra, mobile, other]
    suggested_tags: [feature, requirement]
    hints:
      title: "éœ€æ±‚: [ç®€è¦æè¿°]"
      problem: "æè¿°éœ€æ±‚èƒŒæ™¯ã€ç›®æ ‡ç”¨æˆ·å’Œè¦è§£å†³çš„é—®é¢˜"
      solution: "æè¿°æœ€ç»ˆçš„å®ç°æ–¹æ¡ˆã€å…³é”®è®¾è®¡å†³ç­–"

  # ==========================================================================
  # 3. Bugfix
  # ==========================================================================
  - id: bugfix
    experience_type: bugfix
    name: Bug ä¿®å¤
    description: è®°å½• Bug çš„å‘ç°ã€åˆ†æå’Œä¿®å¤å…¨è¿‡ç¨‹
    icon: "ğŸ›"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: required, label: "Bug æè¿°" }
      - { field: solution, priority: recommended, label: "ä¿®å¤æ–¹æ¡ˆ" }
      - { field: root_cause, priority: recommended, label: "æ ¹æœ¬åŸå› " }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: recommended, label: "å…³é”®ä»£ç å˜æ›´" }
      - { field: git_refs, priority: recommended }
      - { field: severity, priority: recommended }
      - { field: category, priority: recommended }
    structured_fields:
      - { field: reproduction_steps, type: text, priority: required, label: "å¤ç°æ­¥éª¤", hint: "1. æ‰“å¼€é¡µé¢\n2. ç‚¹å‡»æŒ‰é’®\n3. è§‚å¯Ÿé”™è¯¯" }
      - { field: environment, type: text, priority: recommended, label: "ç¯å¢ƒä¿¡æ¯", hint: "OS / æµè§ˆå™¨ / ç‰ˆæœ¬å·ç­‰" }
      - { field: error_logs, type: text, priority: recommended, label: "é”™è¯¯æ—¥å¿—", hint: "å…³é”®çš„é”™è¯¯å †æ ˆæˆ–æ—¥å¿—" }
      - { field: impact_scope, type: text, priority: recommended, label: "å½±å“èŒƒå›´", hint: "å—å½±å“çš„ç”¨æˆ·é‡ / åŠŸèƒ½æ¨¡å—" }
      - { field: verification_result, type: text, priority: optional, label: "éªŒè¯ç»“æœ", hint: "ä¿®å¤åçš„éªŒè¯æƒ…å†µ" }
    progress_states: [open, investigating, fixed, verified]
    severity_options: [P0, P1, P2, P3, P4]
    category_options: [frontend, backend, database, performance, security, mobile, other]
    suggested_tags: [bug, fix]
    hints:
      title: "ä¿®å¤: [ç®€è¦æè¿°]"
      problem: "æè¿° Bug ç°è±¡å’Œå¤ç°æ­¥éª¤"
      root_cause: "åˆ†æ Bug çš„æ ¹æœ¬åŸå› "
      solution: "æè¿°ä¿®å¤æ­¥éª¤å’Œå…³é”®ä»£ç å˜æ›´"

  # ==========================================================================
  # 4. Tech Design (æŠ€æœ¯æ–¹æ¡ˆ)
  # ==========================================================================
  - id: tech_design
    experience_type: tech_design
    name: æŠ€æœ¯æ–¹æ¡ˆ
    description: è®°å½•æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ â€” é€‰å‹åˆ†æã€æ¶æ„å†³ç­–ã€å®ç°è·¯å¾„
    icon: "ğŸ“"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: required, label: "æŠ€æœ¯èƒŒæ™¯" }
      - { field: solution, priority: recommended, label: "æ–¹æ¡ˆè®¾è®¡" }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: optional }
      - { field: git_refs, priority: optional }
      - { field: related_links, priority: recommended }
    structured_fields:
      - { field: alternatives, type: alternatives, priority: recommended, label: "æ–¹æ¡ˆå¯¹æ¯”", hint: "åˆ—å‡ºè€ƒè™‘è¿‡çš„æ›¿ä»£æ–¹æ¡ˆåŠå…¶ä¼˜åŠ£" }
      - { field: rollback_plan, type: text, priority: recommended, label: "å›æ»šæ–¹æ¡ˆ", hint: "å¦‚æœæ–¹æ¡ˆå¤±è´¥ï¼Œå¦‚ä½•å›æ»š" }
      - { field: data_migration, type: text, priority: optional, label: "æ•°æ®è¿ç§»", hint: "æ¶‰åŠçš„æ•°æ®è¿ç§»æ­¥éª¤" }
      - { field: performance_data, type: text, priority: optional, label: "æ€§èƒ½æ•°æ®", hint: "å‹æµ‹ç»“æœ / æ€§èƒ½å¯¹æ¯”" }
      - { field: upstream_downstream, type: text, priority: optional, label: "ä¸Šä¸‹æ¸¸å½±å“", hint: "å¯¹ä¾èµ–æ–¹å’Œè¢«ä¾èµ–æ–¹çš„å½±å“" }
      - { field: monitoring, type: text, priority: optional, label: "ç›‘æ§æ–¹æ¡ˆ", hint: "éœ€è¦å¢åŠ çš„ç›‘æ§æŒ‡æ ‡å’Œå‘Šè­¦è§„åˆ™" }
    progress_states: [researching, reviewing, implementing, completed]
    severity_options: []
    category_options: [frontend, backend, database, infra, performance, security, other]
    suggested_tags: [tech-design, architecture]
    hints:
      title: "æŠ€æœ¯æ–¹æ¡ˆ: [ç®€è¦æè¿°]"
      problem: "æè¿°éœ€æ±‚èƒŒæ™¯ã€æŠ€æœ¯æŒ‘æˆ˜å’Œçº¦æŸæ¡ä»¶"
      solution: "æè¿°é€‰æ‹©çš„æŠ€æœ¯æ–¹æ¡ˆåŠæ ¸å¿ƒè®¾è®¡å†³ç­–"

  # ==========================================================================
  # 5. Incident (æ•…éšœ)
  # ==========================================================================
  - id: incident
    experience_type: incident
    name: æ•…éšœè®°å½•
    description: è®°å½•çº¿ä¸Šæ•…éšœçš„å¤„ç†å…¨è¿‡ç¨‹ â€” å‘ç°ã€æ­¢æŸã€å¤ç›˜
    icon: "ğŸ”¥"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: required, label: "æ•…éšœæè¿°" }
      - { field: solution, priority: recommended, label: "å¤„ç†æ–¹æ¡ˆ" }
      - { field: root_cause, priority: required, label: "æ ¹æœ¬åŸå› " }
      - { field: tags, priority: recommended }
      - { field: severity, priority: required }
      - { field: category, priority: recommended }
      - { field: git_refs, priority: optional }
    structured_fields:
      - { field: reproduction_steps, type: text, priority: recommended, label: "æ•…éšœç°è±¡", hint: "æ•…éšœçš„å…·ä½“è¡¨ç°" }
      - { field: environment, type: text, priority: recommended, label: "æ•…éšœç¯å¢ƒ", hint: "ç”Ÿäº§ç¯å¢ƒ / ç°åº¦ / ç‰ˆæœ¬" }
      - { field: error_logs, type: text, priority: recommended, label: "å…³é”®æ—¥å¿—", hint: "å…³é”®çš„é”™è¯¯æ—¥å¿—å’Œç›‘æ§æˆªå›¾" }
      - { field: impact_scope, type: text, priority: required, label: "å½±å“èŒƒå›´", hint: "å½±å“çš„ç”¨æˆ·é‡ã€æ—¶é•¿ã€æ ¸å¿ƒæŒ‡æ ‡å˜åŒ–" }
      - { field: verification_result, type: text, priority: optional, label: "æ¢å¤éªŒè¯", hint: "æ•…éšœæ¢å¤åçš„éªŒè¯ç»“æœ" }
      - { field: timeline, type: text, priority: recommended, label: "å¤„ç†æ—¶é—´çº¿", hint: "HH:MM å‘ç° â†’ HH:MM æ­¢æŸ â†’ HH:MM æ¢å¤" }
      - { field: prevention, type: text, priority: recommended, label: "é¢„é˜²æªæ–½", hint: "é˜²æ­¢ç±»ä¼¼æ•…éšœå†æ¬¡å‘ç”Ÿçš„æªæ–½" }
    progress_states: [detected, mitigating, resolved, post_mortem]
    severity_options: [P0, P1, P2, P3, P4]
    category_options: [frontend, backend, database, infra, performance, security, other]
    suggested_tags: [incident, outage]
    hints:
      title: "æ•…éšœ: [ç®€è¦æè¿°]"
      problem: "æè¿°æ•…éšœç°è±¡ã€å‘ç°æ—¶é—´å’Œå½±å“èŒƒå›´"
      root_cause: "åˆ†ææ•…éšœçš„æ ¹æœ¬åŸå› "
      solution: "æè¿°æ­¢æŸå’Œä¿®å¤æ–¹æ¡ˆ"

  # ==========================================================================
  # 6. Best Practice (æœ€ä½³å®è·µ)
  # ==========================================================================
  - id: best_practice
    experience_type: best_practice
    name: æœ€ä½³å®è·µ
    description: è®°å½•å›¢é˜Ÿå¼€å‘ä¸­çš„æœ€ä½³å®è·µå’Œè§„èŒƒ
    icon: "âœ¨"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: recommended, label: "é€‚ç”¨åœºæ™¯" }
      - { field: solution, priority: required, label: "å®è·µå†…å®¹" }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: optional, label: "ç¤ºä¾‹ä»£ç " }
    structured_fields: []
    progress_states: []
    severity_options: []
    category_options: [frontend, backend, database, infra, performance, security, other]
    suggested_tags: [best-practice, guideline]
    hints:
      title: "æœ€ä½³å®è·µ: [ç®€è¦æè¿°]"
      problem: "æè¿°é€‚ç”¨åœºæ™¯å’Œä¸ºä»€ä¹ˆéœ€è¦è¿™æ¡å®è·µ"
      solution: "æè¿°å…·ä½“çš„å®è·µå†…å®¹å’Œç¤ºä¾‹"

  # ==========================================================================
  # 7. Learning (å­¦ä¹ ç¬”è®°)
  # ==========================================================================
  - id: learning
    experience_type: learning
    name: å­¦ä¹ ç¬”è®°
    description: è®°å½•å­¦ä¹ æ–°æŠ€æœ¯ã€å·¥å…·æˆ–æ¦‚å¿µçš„ç¬”è®°
    icon: "ğŸ“š"
    core_fields:
      - { field: title, priority: required }
      - { field: problem, priority: recommended, label: "å­¦ä¹ èƒŒæ™¯" }
      - { field: solution, priority: recommended, label: "çŸ¥è¯†æ€»ç»“" }
      - { field: tags, priority: recommended }
      - { field: code_snippets, priority: optional, label: "ä»£ç ç¤ºä¾‹" }
      - { field: related_links, priority: recommended, label: "å‚è€ƒèµ„æ–™" }
    structured_fields: []
    progress_states: []
    severity_options: []
    category_options: [frontend, backend, database, infra, other]
    suggested_tags: [learning, note]
    hints:
      title: "[æŠ€æœ¯åç§°] å­¦ä¹ ç¬”è®°"
      problem: "å­¦ä¹ è¿™ä¸ªæŠ€æœ¯çš„èƒŒæ™¯å’ŒåŠ¨æœº"
      solution: "è®°å½•å…³é”®æ¦‚å¿µã€ç”¨æ³•ç¤ºä¾‹å’Œæ³¨æ„äº‹é¡¹"
